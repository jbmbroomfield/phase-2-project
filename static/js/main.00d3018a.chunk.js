(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{30:function(e,t,r){},42:function(e,t,r){"use strict";r.r(t);for(var n=r(1),c=r.n(n),a=r(23),o=r.n(a),s=(r(30),r(3)),l=r(0),u=function(e){for(var t=[],r=0;r<8;r++)t.push("");return t},i=[],j=0;j<8;j++)i.push(u());for(var b=[],f=[],d=0;d<8;d++)b.push([""]),f.push(0);var v={boardCells:i,forecastCells:b,forecastCooldowns:f,selectedItem:"",selectedItemIndex:0,damage:0,step:0,interval:null,score:0,level:0,levelData:{red:"red",green:"green",blue:"blue"},started:!1,paused:!1},m=c.a.createContext();function p(e){var t=e.children,r=Object(n.useState)(v),c=Object(s.a)(r,2),a=c[0],o=c[1];return Object(l.jsx)(m.Provider,{value:[a,o],children:t})}var h=r(6),O=(r.p,r.p,r.p,r.p,r(24)),x=r(10),g=function(e,t){if(!t)return"?";if("number"===typeof e||""===e)return e;var r=Object(s.a)({upArrow:[x.a,t.green,0],rightArrow:[x.a,t.green,90],downArrow:[x.a,t.green,180],leftArrow:[x.a,t.green,270],crossBlue:[x.c,t.blue,0],crossRed:[x.c,t.red,0],bomb:[x.b,t.red,0]}[e],3),n=r[0],c=r[1],a=r[2];return Object(l.jsx)(O.a,{icon:n,color:c,rotation:a})};function C(e){var t=Object(n.useContext)(m)[0],r=e.value,c="forecast"===e.className&&t.forecastCooldowns[e.rowIndex]>t.step,a=function(n){return!n&&!t.paused&&("forecast"===e.className?e.rowIndex!==t.selectedItemIndex:""===r||t.selectedItem.includes("Blue"))}(c),o=e.rowIndex+1,s=o+1,u=e.startingColumn+e.columnIndex,i=u+1,j={gridArea:"".concat(o," / ").concat(u," / ").concat(s," / ").concat(i)};"number"===typeof r&&(j.color="purple");var b=t.paused?"":g(r,t.levelData),f="forecast"===e.className&&e.rowIndex===t.selectedItemIndex;return Object(l.jsx)("div",{className:"cell cell-".concat(e.className).concat(a?" clickable":"").concat(f?" selected":"").concat(c?" greyed-out":""),onClick:function(){a&&e.cellClick(e.rowIndex,e.columnIndex)},style:j,children:Object(l.jsx)("div",{className:"cell-value",children:b})})}function y(e){var t=e.cells,r=function(t,r){if("object"===typeof t)return t.map((function(t,n){return Object(l.jsx)(C,{rowIndex:r,columnIndex:n,value:t,setCell:e.setCell,className:e.className,startingColumn:e.startingColumn,cellClick:e.cellClick},"cell-".concat(n,",").concat(r))}));console.log("non-object")};return void 0===t?(console.log("cells undefined"),void console.log(e.className)):"object"===typeof t[0]?t.map((function(e,t){return r(e,t)})):r(t,0)}var w=r(12),I=function(e,t,r,n,c,a){var o=[[c,a]],l=[];l.push(c),l.push(a);for(var u={up:"down",down:"up",right:"left",left:"right"}[n],i=0;i<12&&(l=N(l,n));i++)if(o.push([l[0],l[1]]),e[l[0]][l[1]]==="".concat(u,"Arrow")){var j=k(o,e,t),b=Object(s.a)(j,2);e=b[0],t=b[1],r=!1;break}return[e,t,r]},N=function(e,t){switch(t){case"up":e[0]--;break;case"right":e[1]++;break;case"down":e[0]++;break;case"left":e[1]--}return e[0]<0||e[1]<0||e[0]>=8||e[1]>=8?null:e};function k(e,t,r){var n,c=Object(w.a)(e);try{for(c.s();!(n=c.n()).done;){var a=n.value,o=A(t,a[0],a[1],r),l=Object(s.a)(o,2);t=l[0],r=l[1]}}catch(u){c.e(u)}finally{c.f()}return[t,r]}var A=function(e,t,r,n){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("number"!==typeof n)throw"No number!";var a=e[t][r];return"crossRed"!==a||c?"bomb"!==a||c?("number"===typeof a&&(n+=a),e[t][r]="",[e,n]):S(e,t,r,n):D(e,t,r,n)},D=function(e,t,r,n){if("number"!==typeof n)throw"No number!";var c=A(e,t,r,n,!0),a=Object(s.a)(c,2);e=a[0],n=a[1];var o,l=[[t+1,r],[t-1,r],[t,r+1],[t,r-1]].filter((function(e){return e[0]>=0&&e[1]>=0&&e[0]<8&&e[1]<8})),u=Object(w.a)(l);try{for(u.s();!(o=u.n()).done;){var i=o.value,j=A(e,i[0],i[1],n),b=Object(s.a)(j,2);e=b[0],n=b[1]}}catch(f){u.e(f)}finally{u.f()}return[e,n]},S=function(e,t,r,n){if("number"!==typeof n)throw"No number!";var c=A(e,t,r,n,!0);e=c[0],n=c[1];var a,o=Object(w.a)([t-1,t,t+1].filter((function(e){return e>=0&&e<8})));try{for(o.s();!(a=o.n()).done;){var s=a.value,l=B(e,n,t,r,s);e=l[0],n=l[1]}}catch(u){o.e(u)}finally{o.f()}return[e,n]},B=function(e,t,r,n,c){if("number"!==typeof t)throw"No number!";var a,o=Object(w.a)([n-1,n,n+1].filter((function(e){return e>=0&&e<8&&(r!==c||n!==e)})));try{for(o.s();!(a=o.n()).done;){var s=a.value,l=A(e,c,s,t);e=l[0],t=l[1]}}catch(u){o.e(u)}finally{o.f()}return[e,t]},F=function(e,t,r,n,c){var a=!0;if("crossBlue"===e)return D(t,r,n,c);if(e.includes("Arrow")){var o=e.slice(0,e.length-5),s=I(t,c,a,o,r,n);t=s[0],c=s[1],a=s[2]}return a&&(t[r][n]=e),[t,c]},P=r(22),T={upArrow:1,rightArrow:1,downArrow:1,leftArrow:1,crossBlue:1,bomb:1},_=function(){return M(T)};function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===Object.keys(e).length)return null;var r=E(e),n=Math.floor(Math.random()*r.length),c=r[n];return t||"object"!==typeof c?c:M(c)}function E(e){if(Array.isArray(e))return e;var t=[];for(var r in e)J(t,r,e[r]);return t}function J(e,t,r){for(var n=0;n<r;n++)e.push(t);return e}var L=function(e,t){return[].concat(Object(P.a)(e.slice(0,t)),Object(P.a)(e.slice(t+1)),[[_()]])},R=function(e){if(e.step%10!==0)return null;for(var t=[],r=0;r<8;r++)t=z(t,r,e.boardCells);return M(t,!0)},z=function(e,t,r){for(var n=r[t],c=0;c<8;c++){""===n[c]&&e.push([t,c])}return e},G=function(e,t,r,n){for(var c=0;c<8;c++){var a=e[t][c];r=Y(a,e,t,c,r,n)}return r},Y=function(e,t,r,n,c,a){return"number"===typeof e&&e>9?(t[r][n]=9,c+H(r,n,t,c)):(a&&a[0]===r&&a[1]===n&&(t[r][n]=1),c)},H=function(e,t,r,n){var c,a=[[e,t+1],[e,t-1],[e+1,t],[e-1,t]].filter((function(e){return e[0]>=0&&e[1]>=0&&e[0]<8&&e[1]<8})),o=Object(w.a)(a);try{for(o.s();!(c=o.n()).done;){var s=c.value;n=q(r,s,n)}}catch(l){o.e(l)}finally{o.f()}return n},q=function(e,t,r){var n=e[t[0]][t[1]];return""===n?(e[t[0]][t[1]]=1,0):("number"===typeof n&&(n>=9?r++:e[t[0]][t[1]]+=1),r)},K=function(e){e((function(e){if(e.paused)return e;for(var t=R(e),r=0,n=e.boardCells.map((function(e){return e.map((function(e){return"number"===typeof e?e+1:e}))})),c=0;c<8;c++)r=G(n,c,r,t);var a=e.damage+r,o=a>999;return o&&clearInterval(e.interval),Object(h.a)(Object(h.a)({},e),{},{damage:a,boardCells:n,step:e.step+1,gameOver:o})}))};function Q(e){var t=Object(n.useContext)(m),r=Object(s.a)(t,2),c=r[0],a=r[1];return Object(l.jsx)(y,{cells:c.boardCells,className:"board",startingColumn:1,cellClick:function(e,t){var r=c.boardCells,n=c.forecastCells,o=c.selectedItemIndex,l=c.score,u=F(c.selectedItem,r,e,t,l,c.levelData),i=Object(s.a)(u,2),j=i[0],b=i[1],f=L(n,o),d=c.forecastCooldowns,v=c.levelData;o>0&&(d[o]=c.step+5*o);var m=c.level,p=c.interval,O=c.levelsData,x=m,g=v,C=p;b>=c.levelData.goal&&O.length>m+1&&(g=O[x+=1],clearInterval(p),C=setInterval((function(){K(a)}),g.stepSize)),a(Object(h.a)(Object(h.a)({},c),{},{boardCells:j,forecastCells:f,score:b,selectedItemIndex:0,selectedItem:f[0][0],forecastCooldowns:d,levelData:g,level:x,interval:C}))}})}function U(e){var t=Object(n.useContext)(m),r=Object(s.a)(t,2),c=r[0],a=r[1];return Object(l.jsx)(y,{cells:c.forecastCells,className:"forecast",startingColumn:10,cellClick:function(e){a(Object(h.a)(Object(h.a)({},c),{},{selectedItemIndex:e,selectedItem:c.forecastCells[e][0]}))}})}function V(e){var t=Object(n.useContext)(m),r=Object(s.a)(t,2),c=r[0],a=(r[1],c.levelData),o={gridArea:"1 / ".concat(12," / 3 / ").concat(17),backgroundColor:a.green};return Object(l.jsx)("div",{className:"level panel",style:o,children:c.started&&"Level ".concat(c.level," - ").concat(a.name)})}function W(e){var t=Object(n.useContext)(m),r=Object(s.a)(t,2),c=r[0],a=(r[1],c.levelData),o={gridArea:"3 / ".concat(12," / 5 / ").concat(17),backgroundColor:a.green};return Object(l.jsx)("div",{className:"score panel",style:o,children:c.started&&"Score: ".concat(c.score," / ").concat(a.goal)})}function X(e){var t=Object(n.useContext)(m),r=Object(s.a)(t,2),c=r[0],a=(r[1],c.levelData),o={gridArea:"5 / ".concat(12," / 7 / ").concat(17),backgroundColor:a.purple};return Object(l.jsx)("div",{className:"damage panel",style:o,children:c.started&&"Damage: ".concat(c.damage)})}var Z=function(){for(var e=[],t=0;t<8;t++)e.push([_()]);return e},$=function(e,t){var r=Z();fetch("https://jbmbroomfield.github.io/Data/levels_data.json").then((function(e){return e.json()})).then((function(n){var c=n[0];console.log({state:e}),t(Object(h.a)(Object(h.a)({},e),{},{levelsData:n,levelData:c,forecastCells:r,selectedItem:r[0][0],interval:setInterval((function(){K(t)}),c.stepSize),started:!0}))}))},ee=function(e){var t=Object(n.useContext)(m),r=Object(s.a)(t,2),c=r[0],a=r[1],o=c.levelData,u={gridArea:"7 / ".concat(12," / 9 / ").concat(17),backgroundColor:o.blue},i=c.started?c.paused?"Resume":"Pause":"Start";return Object(l.jsx)("div",{className:"pause panel clickable",style:u,onClick:function(){c.started?a(Object(h.a)(Object(h.a)({},c),{},{paused:!c.paused})):$(c,a)},children:i})};function te(e){var t={gridTemplateColumns:"repeat(".concat(16,", 1fr)")};return Object(l.jsxs)("div",{className:"game-grid",style:t,children:[Object(l.jsx)(Q,{}),Object(l.jsx)(U,{}),Object(l.jsx)(V,{}),Object(l.jsx)(W,{}),Object(l.jsx)(X,{}),Object(l.jsx)(ee,{})]})}var re=r(44),ne=r(4);function ce(e){var t=Object(n.useContext)(m),r=Object(s.a)(t,2),c=r[0],a=(r[1],Object(ne.e)());return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h1",{children:["Game Over! You scored ",c.score," points."]}),Object(l.jsxs)("form",{onSubmit:function(e){console.log("submitting high score"),e.preventDefault();var t={name:document.getElementById("name-text").value,score:c.score,id:Object(re.a)()},r={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)};console.log({data:t}),fetch("https://my-json-server.typicode.com/jbmbroomfield/phase-2-project-json-server/high_scores_db",r),a.push("/high-scores")},children:[Object(l.jsx)("input",{type:"text",id:"name-text",placeholder:"Your name"}),Object(l.jsx)("input",{id:"submit-button",type:"submit",value:"Submit Score"})]})]})}function ae(){return Object(l.jsx)("div",{className:"footer",children:"Footer"})}function oe(e){var t=Object(n.useContext)(m),r=Object(s.a)(t,2),c=r[0];r[1];return Object(l.jsxs)("div",{className:"game",children:[c.gameOver?Object(l.jsx)(ce,{}):Object(l.jsx)(te,{}),Object(l.jsx)(ae,{})]})}var se=r(11);function le(e){return Object(l.jsx)("div",{className:"new-game",children:Object(l.jsx)(se.b,{to:"/phase-2-project/game",exact:!0,children:"New Game"})})}function ue(e){return Object(l.jsx)("div",{className:"new-game",children:Object(l.jsx)(se.b,{to:"/phase-2-project/high-scores",exact:!0,children:"High Scores"})})}function ie(e){return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(le,{}),Object(l.jsx)(ue,{})]})}function je(e){var t=Object(n.useState)([]),r=Object(s.a)(t,2),c=r[0],a=r[1];Object(n.useEffect)((function(){fetch("https://my-json-server.typicode.com/jbmbroomfield/phase-2-project-json-server/high_scores_db").then((function(e){return e.json()})).then((function(e){a(e)}))}),[]);return Object(l.jsxs)("div",{children:[c.map((function(e){return Object(l.jsxs)("div",{children:[e.name,": ",e.score]})})),Object(l.jsx)("button",{onClick:function(){},children:"Click Me"})]})}function be(e){return Object(l.jsx)(p,{children:Object(l.jsx)(oe,{})})}var fe=function(e){return Object(l.jsx)(se.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsx)(ne.a,{exact:!0,path:"/phase-2-project",component:ie}),Object(l.jsx)(ne.a,{exact:!0,path:"/phase-2-project/game",component:be}),Object(l.jsx)(ne.a,{exact:!0,path:"/phase-2-project/high-scores",component:je})]})})},de=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,45)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),c(e),a(e),o(e)}))};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(fe,{})}),document.getElementById("root")),de()}},[[42,1,2]]]);
//# sourceMappingURL=main.00d3018a.chunk.js.map